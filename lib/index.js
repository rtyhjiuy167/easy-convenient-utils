!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.index=t():e.index=t()}(this,(()=>(()=>{"use strict";var e={250:(e,t,r)=>{r.d(t,{default:()=>n});class n{constructor(e){this.allowedChar=!1,this.charMap={},this.autoChange=!1,this.infix=e.infix,e.allowedChar&&(this.allowedChar=e.allowedChar),e.charMap&&(this.charMap=e.charMap),e.autoChange&&(this.autoChange=e.autoChange);const t=this._infixCalculate(this.infix);this.isLegal=t.isLegal,this.result=t.result,this.isLegal&&(this.formula=e.infix.join(""),this.minRes=this._calculateMin(this.infix),this.maxRes=this._calculateMax(this.infix))}_infixCalculate(e,t=this.allowedChar){let r={isLegal:!1,result:0};if(t){r.result=void 0;let t=[],n=0,s=0;for(let i=0;i<e.length;i++)if("("===e[i])t.push(e[i]);else if(")"===e[i]){let n=t.pop();if(0===i)return r;if("("!==n||"("===e[i-1])return r}else if(this._isOperator(e[i])){if(i+1===e.length||0===i)return r;if(this._isOperator(e[i+1])||this._isOperator(e[i-1]))return r;n++}else s++;if(0!==t.length)return r;if(n+1!==s)return r}else{let t=[],n=[],s=!1;for(let i=0;i<e.length;i++){if(void 0===e[i]||null===e[i])return r;if("("===e[i]||this._isOperator(e[i]))t.push(e[i]);else if(this._isOperand(e[i])&&n.push(e[i]),")"===e[i]||i+1===e.length&&0!==t.length){let l=t[t.length-1];if(s&&")"===e[i])return r;for(;"("!==l;){let e=t.length-1,s=n.length-1;for(;0!==t.length&&this._ge(t[e-1],t[e]);)e--,s--;let i=n[s],a=n[s-1];if(l=t[e],void 0===a||void 0===i)return r;if(("/"===l||"÷"===l)&&0===i)return r;if("string"!=typeof a&&"string"!=typeof i||console.warn("you should set autoChange to true"),n.splice(s-1,2,this._cal(Number(a),l,Number(i))),t.splice(e,1),0===t.length)break;l=t[t.length-1]}t.pop()}s=this._isOpOrBracket(e[i])}if(t.length+1!==n.length)return r;r.result=n.pop()}return r.isLegal=!0,r}_calculateMin(e,t="min",r=this.autoChange){let n=e.concat();for(let e=0;e<n.length;e++){let s=this.charMap[n[e]];if(r&&!Number.isNaN(Number(n[e])))n[e]=Number(n[e]);else if(!this._isOpOrBracket(n[e])&&"number"!=typeof n[e]){if(void 0===s)return void console.log(`charMap ${n[e]} is undefined`);if(Number.isNaN(Number(s[t])))return void console.error(`${n[e]}.${t} is NaN`);n[e]=Number(s[t])}}return this._infixCalculate(n,!1).result}_calculateMax(e,t="max",r=this.autoChange){let n=e.concat();for(let e=0;e<n.length;e++){let s=this.charMap[n[e]];if(r&&!Number.isNaN(Number(n[e])))n[e]=Number(n[e]);else if(!this._isOpOrBracket(n[e])&&"number"!=typeof n[e]){if(void 0===s)return void console.log(`charMap ${n[e]} is undefined`);if(Number.isNaN(Number(s[t])))return void console.error(`${n[e]}.${t} is NaN`);n[e]=Number(s[t])}}return this._infixCalculate(n,!1).result}_cal(e,t,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":case"×":return e*r;case"/":case"÷":return e/r}}_replace(e){switch(e){case"(":return 0;case"+":return 1;case"-":return 2;case"*":case"×":return 3;case"/":case"÷":return 4}}_isOperator(e){return/^[\+\-\*\/÷×]$/.test(String(e))}_isOpOrBracket(e){return/^[\+\-\*\/\(\)×÷]$/.test(String(e))}_isOperand(e){return!Number.isNaN(Number(e))}_ge(e,t){return this._replace(t)<=this._replace(e)}}},837:(e,t,r)=>{r.d(t,{default:()=>n});const n=class{static format(e,t){const r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},n=/(y+)/.exec(t);n&&(t=t.replace(n[1],(e.getFullYear()+"").substring(4-n[1].length)));const s=/(w+)/.exec(t);s&&(t=t.replace(s[1],["日","一","二","三","四","五","六"][e.getDay()]));for(const e in r){const n=new RegExp("("+e+")").exec(t);if(n){const s=1==n[1].length?r[e]:("00"+r[e]).substring((""+r[e]).length);t=t.replace(n[1],String(s))}}return t}static newDate(e){return this.format(new Date,e)}}},587:(e,t,r)=>{r.d(t,{default:()=>n});const n=class{constructor(e,t,r){this.statSync=e,this.readdirSync=t,this.readFile=r}pathJoin(...e){return e.map((e=>e.replace(/^\/|\/$/g,""))).join("\\")}isFile(e){return this.statSync(e).isFile()}isDir(e){return this.statSync(e).isDirectory()}getFileType(e){const t=e.split(".");return t[t.length-1]}getAllFilesInfo(e,t){const r=[],n=(e,t,r)=>{const s=this.readdirSync(e);for(let i=0;i<s.length;i++){const l=s[i],a=this.pathJoin(e,l);if(this.isFile(a)){const e=l.split("."),t=e[0],n=e[1];r.push({path:a,name:l,title:t,type:n})}else t&&n(a,t,r)}};return n(e,t,r),r}getAllImgFilesInfo(e,t){return this.getAllFilesInfo(e,t).filter((e=>["jpg","png","jpeg"].includes(e.type)))}imgsFolderWatch({dir:e,deep:t,gap:r,initFunc:n,endFunc:s,changeFunc:i}){n&&n();let l=0;const a=setInterval((()=>{const r=this.getAllImgFilesInfo(e,t);s&&s(r)&&clearInterval(a),l!=r.length&&(i(r),l=r.length)}),r);return a}changeImgFile2Base64({path:e,cb:t}){return new Promise(((r,n)=>{this.readFile(e,((n,s)=>{if(n)console.error(n),r("");else{const n=`data:image/${this.getFileType(e)};base64,${s.toString("base64")}`;t&&t(n),r(n)}}))}))}getAllImgFilesBase64(e,t){return new Promise(((r,n)=>{const s=this.getAllImgFilesInfo(e,t);let i=0;for(let e=0;e<s.length;e++){const t=s[e],n=e=>{t.url=e,i++,i===s.length&&r(s)};this.changeImgFile2Base64({path:t.path,cb:n})}}))}}},373:(e,t,r)=>{r.d(t,{default:()=>n});const n=class{get isLoading(){return this.loading}constructor(e){this.params={funcList:[],argsList:[],intervalTime:1e3},Object.assign(this.params,e)}next(){return e=this,t=void 0,n=function*(){this.loading=!0;const e=this.params.funcList.shift();if(e){const t=this.params.argsList.shift();yield e(t)}this.loading=!1},new((r=void 0)||(r=Promise))((function(s,i){function l(e){try{o(n.next(e))}catch(e){i(e)}}function a(e){try{o(n.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,a)}o((n=n.apply(e,t||[])).next())}));var e,t,r,n}push(e,t){this.params.funcList.push(e),this.params.argsList.push(t)}start(){this.end(),this.interval=setInterval((()=>{this.loading||this.next()}),this.params.intervalTime)}end(){clearInterval(this.interval),this.params.funcList=[],this.params.argsList=[],this.loading=!1}}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{CalculateFormula:()=>l.default,DateUtils:()=>i.default,FileUtils:()=>s.default,FuncQueue:()=>a.default,MatrixUtils:()=>o});var s=r(587),i=r(837),l=r(250),a=r(373);const o=class{static largestRectangleAreaByViolence(e){let t=0;for(let r=0;r<e.length;r++){let n=r-1,s=r+1,i=e[r];for(;;)if(n>=0&&e[r]<=e[n]&&(i+=e[r],n--),s<e.length&&e[r]<=e[s]&&(i+=e[r],s++),(n<0||e[r]>e[n])&&(s>=e.length||e[r]>e[s])){t<i&&(t=i);break}}return t}static largestRectangleAreaByStack(e){let t=[],r=[],n=[];for(let r=0;r<e.length;r++){for(;n.length&&e[n[n.length-1]]>=e[r];)n.pop();t[r]=0===n.length?-1:n[n.length-1],n.push(r)}n=[];for(let t=e.length-1;t>=0;t--){for(;n.length&&e[n[n.length-1]]>=e[t];)n.pop();r[t]=0===n.length?e.length:n[n.length-1],n.push(t)}let s=0;for(let n=0;n<e.length;n++){let i=(r[n]-t[n]-1)*e[n];s=s<i?i:s}return s}static transpose(e){const t=new Array(e[0].length).fill(0).map((()=>new Array(e.length)));for(let r=0;r<e.length;r++)for(let n=0;n<e[r].length;n++)t[n][r]=e[r][n];return t}static maximalRectangle(e){const t=e.length,r={maxArea:0,pts:[]};if(!t)return r;const n=e[0].length;let s=new Array(t).fill(0).map((()=>new Array(n).fill(0)));for(let r=0;r<t;r++)for(let t=0;t<n;t++)1===Number(e[r][t])&&(s[r][t]=(0===t?0:s[r][t-1])+1);for(let e=0;e<n;e++){const n=[],i=[];let l=[];for(let r=0;r<t;r++){for(;l.length&&s[l[l.length-1]][e]>=s[r][e];)l.pop();n[r]=0===l.length?-1:l[l.length-1],l.push(r)}l=[];for(let r=t-1;r>=0;r--){for(;l.length&&s[l[l.length-1]][e]>=s[r][e];)l.pop();i[r]=0===l.length?t:l[l.length-1],l.push(r)}for(let l=0;l<t;l++){const t=i[l]-n[l]-1,a=t*s[l][e];r.maxArea<a&&(r.maxArea=a,r.pts[0]=[n[l]+1,e-t+1],r.pts[1]=[n[l]+1,e],r.pts[2]=[i[l]-1,e],r.pts[3]=[i[l]-1,e-t+1])}}return r}};return n})()));