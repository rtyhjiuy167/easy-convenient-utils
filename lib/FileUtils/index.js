!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["FileUtils/index"]=t():e["FileUtils/index"]=t()}(this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>n});const n=class{constructor(e,t,n){this.statSync=e,this.readdirSync=t,this.readFile=n}pathJoin(...e){return e.map((e=>e.replace(/^\/|\/$/g,""))).join("\\")}isFile(e){return this.statSync(e).isFile()}isDir(e){return this.statSync(e).isDirectory()}getFileType(e){const t=e.split(".");return t[t.length-1]}getAllFilesInfo(e,t){const n=[],i=(e,t,n)=>{const l=this.readdirSync(e);for(let r=0;r<l.length;r++){const s=l[r],o=this.pathJoin(e,s);if(this.isFile(o)){const e=s.split("."),t=e[0],i=e[1];n.push({path:o,name:s,title:t,type:i})}else t&&i(o,t,n)}};return i(e,t,n),n}getAllImgFilesInfo(e,t){return this.getAllFilesInfo(e,t).filter((e=>["jpg","png","jpeg"].includes(e.type)))}imgsFolderWatch({dir:e,deep:t,gap:n,initFunc:i,endFunc:l,changeFunc:r}){i&&i();let s=0;const o=setInterval((()=>{const n=this.getAllImgFilesInfo(e,t);l&&l(n)&&clearInterval(o),s!=n.length&&(r(n),s=n.length)}),n);return o}changeImgFile2Base64({path:e,cb:t}){return new Promise(((n,i)=>{this.readFile(e,((i,l)=>{if(i)console.error(i),n("");else{const i=`data:image/${this.getFileType(e)};base64,${l.toString("base64")}`;t&&t(i),n(i)}}))}))}getAllImgFilesBase64(e,t){return new Promise(((n,i)=>{const l=this.getAllImgFilesInfo(e,t);let r=0;for(let e=0;e<l.length;e++){const t=l[e],i=e=>{t.url=e,r++,r===l.length&&n(l)};this.changeImgFile2Base64({path:t.path,cb:i})}}))}};return t})()));